<%= render 'layouts/navbar' %>
<%= render 'layouts/header' %>
<%= render 'layouts/flashes' %>

<div class="container">
  <%= link_to 'clear all cart items', clean_cart_path, :method => 'delete', :data => { confirm: 'you sure?'} %>

  <h2>Shopping Cart</h2>

  <% current_cart.cart_items.each do |cart_item| %>
    <!-- Product Image -->
    <% if cart_item.product.image.present? %>
      <%= image_tag cart_item.product.image.url(:thumb) %>
    <% else %>
      <%= image_tag ("http://placehold.it/200x200&text=No Image") %>
    <% end %>
    <p> <%= cart_item.product.title %> | <%= number_to_currency  cart_item.product.price %></p>

      <%= simple_form_for cart_item, url: cart_item_path(cart_item.product_id) do |f| %>
        <%= f.select :quantity, 1..10 %>
        <%= f.submit "update", class: 'btn btn-info btn-sm' %>
      <% end %> |
    <span>
      <%= link_to 'remove', cart_item_path(cart_item.product_id), method: :delete, class: 'btn btn-danger btn-sm' %>
    </span>
    <hr>
  <% end %>

  <p>
    Total Price: <%= number_to_currency render_cart_total_price(current_cart) %>
  </p>

  <%= link_to 'proceed to checkout', checkout_cart_path, method: :post, class: 'btn btn-warning' %>
</div>
